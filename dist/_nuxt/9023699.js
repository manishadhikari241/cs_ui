(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{507:function(t,e,o){var content=o(621);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(30).default)("d531691e",content,!0,{sourceMap:!1})},508:function(t,e,o){var content=o(623);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(30).default)("33ccf7e4",content,!0,{sourceMap:!1})},509:function(t,e,o){var content=o(625);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(30).default)("83becd8e",content,!0,{sourceMap:!1})},620:function(t,e,o){"use strict";o(507)},621:function(t,e,o){(e=o(29)(!1)).push([t.i,".modal-dialog .confirm-box-body{text-align:center}.modal-dialog .confirm-box-body-confirm{text-align:center;padding-top:40px}.modal-dialog .confirm-box-footer-confirm{height:120px;padding-bottom:50px;border-top:none;justify-content:center}.modal-dialog .confirm-box-footer-confirm .btn-secondary{background-color:#363636;color:#363636;background-color:#fff}.modal-dialog .confirm-box-footer-confirm .btn-primary,.modal-dialog .confirm-box-footer-confirm .btn-secondary{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:-163px;font-weight:700;margin-right:-163px}.modal-dialog .confirm-box-footer-confirm .btn-primary{color:#fff;background-color:#363636}.modal-dialog .confirm-box-footer{border-top:none;justify-content:center}.modal-dialog .confirm-box-footer button{background:#363636;color:#fff;border:none;outline:none}.modal-dialog .confirm-box-footer button.btn-secondary{opacity:.5}.modal-content .modal-header{margin-left:-1px;margin-top:-1px;background-color:#363636;color:#fff}.white-button{background-color:#363636;color:#363636;background-color:#fff}.black-button,.white-button{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:20px;font-weight:600;margin-right:20px;text-transform:uppercase}.black-button{color:#fff;background-color:#363636}#cms-collections-list th{font-size:13px}#cms-collections-list td{font-size:12px}.cmscomponent.list .actions-container{display:flex;justify-content:space-between;align-items:middle;background:#ddd;padding:10px;border-radius:5px}.cmscomponent.list .actions-container .form-control{height:38px}.cmscomponent.list .actions-container .pagination{margin:0}",""]),t.exports=e},622:function(t,e,o){"use strict";o(508)},623:function(t,e,o){(e=o(29)(!1)).push([t.i,".modal-dialog .confirm-box-body[data-v-02836324]{text-align:center}.modal-dialog .confirm-box-body-confirm[data-v-02836324]{text-align:center;padding-top:40px}.modal-dialog .confirm-box-footer-confirm[data-v-02836324]{height:120px;padding-bottom:50px;border-top:none;justify-content:center}.modal-dialog .confirm-box-footer-confirm .btn-secondary[data-v-02836324]{background-color:#363636;color:#363636;background-color:#fff}.modal-dialog .confirm-box-footer-confirm .btn-primary[data-v-02836324],.modal-dialog .confirm-box-footer-confirm .btn-secondary[data-v-02836324]{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:-163px;font-weight:700;margin-right:-163px}.modal-dialog .confirm-box-footer-confirm .btn-primary[data-v-02836324]{color:#fff;background-color:#363636}.modal-dialog .confirm-box-footer[data-v-02836324]{border-top:none;justify-content:center}.modal-dialog .confirm-box-footer button[data-v-02836324]{background:#363636;color:#fff;border:none;outline:none}.modal-dialog .confirm-box-footer button.btn-secondary[data-v-02836324]{opacity:.5}.modal-content .modal-header[data-v-02836324]{margin-left:-1px;margin-top:-1px;background-color:#363636;color:#fff}.white-button[data-v-02836324]{background-color:#363636;color:#363636;background-color:#fff}.black-button[data-v-02836324],.white-button[data-v-02836324]{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:20px;font-weight:600;margin-right:20px;text-transform:uppercase}.black-button[data-v-02836324]{color:#fff;background-color:#363636}.cmscomponent.collection .moodboard[data-v-02836324]{position:relative;width:100px;height:100px;background:#ddd}.cmscomponent.collection .moodboard img[data-v-02836324]{height:100px}.cmscomponent.collection .moodboard button[data-v-02836324]{position:absolute;bottom:5px;left:5px;font-size:12px}.cmscomponent.collection .designs-list .design[data-v-02836324]{position:relative;display:inline-block;margin-right:10px;margin-bottom:10px;width:100px;height:100px;background:#ddd}.cmscomponent.collection .designs-list .design img[data-v-02836324]{height:100px}.cmscomponent.collection .designs-list .design button[data-v-02836324]{position:absolute;bottom:5px;left:5px;font-size:12px}",""]),t.exports=e},624:function(t,e,o){"use strict";o(509)},625:function(t,e,o){(e=o(29)(!1)).push([t.i,".modal-dialog .confirm-box-body[data-v-a4c4fd56]{text-align:center}.modal-dialog .confirm-box-body-confirm[data-v-a4c4fd56]{text-align:center;padding-top:40px}.modal-dialog .confirm-box-footer-confirm[data-v-a4c4fd56]{height:120px;padding-bottom:50px;border-top:none;justify-content:center}.modal-dialog .confirm-box-footer-confirm .btn-secondary[data-v-a4c4fd56]{background-color:#363636;color:#363636;background-color:#fff}.modal-dialog .confirm-box-footer-confirm .btn-primary[data-v-a4c4fd56],.modal-dialog .confirm-box-footer-confirm .btn-secondary[data-v-a4c4fd56]{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:-163px;font-weight:700;margin-right:-163px}.modal-dialog .confirm-box-footer-confirm .btn-primary[data-v-a4c4fd56]{color:#fff;background-color:#363636}.modal-dialog .confirm-box-footer[data-v-a4c4fd56]{border-top:none;justify-content:center}.modal-dialog .confirm-box-footer button[data-v-a4c4fd56]{background:#363636;color:#fff;border:none;outline:none}.modal-dialog .confirm-box-footer button.btn-secondary[data-v-a4c4fd56]{opacity:.5}.modal-content .modal-header[data-v-a4c4fd56]{margin-left:-1px;margin-top:-1px;background-color:#363636;color:#fff}.white-button[data-v-a4c4fd56]{background-color:#363636;color:#363636;background-color:#fff}.black-button[data-v-a4c4fd56],.white-button[data-v-a4c4fd56]{font-size:13px;border:1px solid #363636;border-radius:30px;padding:5px 45px;margin-left:20px;font-weight:600;margin-right:20px;text-transform:uppercase}.black-button[data-v-a4c4fd56]{color:#fff;background-color:#363636}.cmscomponent.collection .moodboard[data-v-a4c4fd56]{position:relative;width:100px;height:100px;background:#ddd}.cmscomponent.collection .moodboard img[data-v-a4c4fd56]{height:100px}.cmscomponent.collection .moodboard button[data-v-a4c4fd56]{position:absolute;bottom:5px;left:5px;font-size:12px}.cmscomponent.collection .design-preview[data-v-a4c4fd56]{margin-bottom:5px}.cmscomponent.collection .design-preview img[data-v-a4c4fd56]{height:100px}.cmscomponent.collection .designs-list .design[data-v-a4c4fd56]{position:relative;display:inline-block;margin-right:10px;margin-bottom:10px;width:100px;height:100px;background:#ddd}.cmscomponent.collection .designs-list .design img[data-v-a4c4fd56]{height:100px}.cmscomponent.collection .designs-list .design button[data-v-a4c4fd56]{position:absolute;bottom:5px;left:5px;font-size:12px}",""]),t.exports=e},710:function(t,e,o){"use strict";o.r(e);o(130);var n={data:function(){return{items:[],perPage:20,currentPage:1,total:0,fields:[{key:"id",label:"ID"},{key:"user.email",label:"Creator"},{key:"translations[0].title",label:"Name"},{key:"season.translations[0].name",label:"Season"},{key:"moodboard",label:"MoodBoard"},{key:"publish_at",label:"Publish Date"},{key:"is_active",label:"Is Active"}],loading:!1,searchTerm:{tmp:"",value:""},cloudfrontURL:"https://d3b50kx4ys1jup.cloudfront.net"}},methods:{load:function(t){var e=this;this.loading=!0,this.$axios.$get("/cms/collections?&scope[]=user&scope[]=moodboards&take=".concat(this.perPage,"&page=").concat(t).concat(this.searchTerm.value?"&keyword="+this.searchTerm.value:"","&sort=-created_at")).then((function(t){e.items=t.data,e.total=t.total,e.loading=!1,document.querySelector(".menuframe").scrollTop=0}))},search:function(){this.searchTerm.value=this.searchTerm.tmp,this.currentPage=1,this.load(this.currentPage),document.querySelector(".search-input").blur()},resetSearch:function(){this.searchTerm.tmp="",this.search()},select:function(t,e,o){this.$router.push("/cms/collections?id=".concat(t.id))},refresh:function(){this.load(this.currentPage)}},mounted:function(){var t=this;this.$nextTick((function(){t.load(t.currentPage)}))}},r=(o(620),o(21)),c=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cmscomponent list"},[o("div",{staticClass:"actions-container"},[o("div",[o("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{staticClass:"search-input",attrs:{placeholder:"Search by keyword"},model:{value:t.searchTerm.tmp,callback:function(e){t.$set(t.searchTerm,"tmp",e)},expression:"searchTerm.tmp"}}),t._v(" "),o("b-input-group-append",[o("b-button",{directives:[{name:"show",rawName:"v-show",value:t.searchTerm.value,expression:"searchTerm.value"}],attrs:{variant:"secondary",type:"button"},on:{click:t.resetSearch}},[t._v("Reset")]),t._v(" "),o("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Search")])],1)],1)],1)]),t._v(" "),o("div",[o("b-pagination",{attrs:{"total-rows":t.total,"per-page":t.perPage,"aria-controls":"cms-collections-list"},on:{change:t.load},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),t._v(" "),o("div",{staticClass:"additional-actions"},[o("div",[t._v(" ")]),t._v(" "),o("div",{staticClass:"total-count"},[t._v("\n      Total: "),o("strong",[t._v(t._s(t.total))])])]),t._v(" "),o("b-table",{attrs:{id:"cms-collections-list",items:t.items,fields:t.fields,busy:t.loading,"select-mode":"single","sticky-header":"",small:"",selectable:"",striped:""},on:{"row-clicked":t.select},scopedSlots:t._u([{key:"cell(designer_id)",fn:function(data){return[o("nuxt-link",{attrs:{to:"/cms/users?id="+data.item.designer_id}},[t._v(t._s(data.item.designer_id))])]}},{key:"cell(moodboard)",fn:function(data){return[data.item.moodboards[0]?o("img",{staticStyle:{height:"30px"},attrs:{src:t.cloudfrontURL+"/uploads/lib/feed/moodboard"+data.item.moodboards[0].moodboard}}):o("span",[t._v("---")])]}},{key:"cell(is_active)",fn:function(data){return[data.item.is_active?o("b-badge",{attrs:{variant:"success"}},[t._v("Active")]):o("b-badge",{attrs:{variant:"danger"}},[t._v("Not Active")])]}}])})],1)}),[],!1,null,null,null).exports,l=(o(22),o(172)),d=o.n(l),m=(o(270),{props:["itemId"],components:{Multiselect:d.a},data:function(){return{cloudfrontURL:"https://d3b50kx4ys1jup.cloudfront.net",serverURL:"https://newapi.collectionstock.com",categories:[],goods:[],seasons:[],linkDesignId:"",moodboards:{en:{item:null,loading:!1},ch:{item:null,loading:!1}},item:null,loading:!1}},methods:{load:function(){var t=this;this.$axios.$get("/cms/collections/".concat(this.itemId,"?scope[]=user&scope[]=designs&scope[]=moodboards&scope[]=categories&scope[]=goods&scope[]=season&cms=true")).then((function(e){t.item=e})),this.$axios.$get("/cms/libCategories").then((function(e){t.categories=e})),this.$axios.$get("/cms/goods/masks?all=true").then((function(e){t.goods=e})),this.$axios.$get("/cms/seasons?all=true").then((function(e){t.seasons=e}))},cancel:function(){this.$emit("updated",{clearItemFrame:!0})},toggleActive:function(){var t=this;this.$axios.$post("/cms/collections/".concat(this.itemId,"/toggle")).then((function(e){t.load(),t.$toast.success("Collection updated successfully"),t.$emit("updated",{refresh:!0})})).catch((function(e){t.$toast.error(e.response.data.error.message)}))},categoryLabel:function(t){return t.translations[0].name},goodLabel:function(t){return t.translations[0].name},seasonLabel:function(t){return t.translations[0].name},update:function(t){var e=this,o=[];this.item.categories.forEach((function(t){o.push(t.id)}));var n=[];this.item.goods.forEach((function(t){n.push(t.id)}));var r=this.item.season?this.item.season.id:null;this.loading=!0,this.$axios.$patch("/cms/collections/".concat(this.itemId),{titleEN:this.item.translations[0].title,titleCH:this.item.translations[1].title,descriptionEN:this.item.translations[0].description,descriptionCH:this.item.translations[1].description,categories:o,goods:n,season:r}).then((function(t){e.loading=!1,e.$toast.success("Collection updated successfully"),e.$emit("updated",{refresh:!0})})).catch((function(t){e.loading=!1,e.$toast.error(t.response.data.error.message)}))},addDesign:function(){var t=this;this.$axios.$post("/cms/collections/".concat(this.itemId,"/designs"),{designId:this.linkDesignId}).then((function(e){t.load(),t.linkDesignId="",t.$toast.success("Design added successfully")})).catch((function(e){t.$toast.error(e.response.data.error.message),t.linkDesignId=""}))},removeDesign:function(t){var e=this;this.$axios.$delete("/cms/collections/".concat(this.itemId,"/designs/").concat(t)).then((function(t){e.load(),e.$toast.success("Design removed successfully")})).catch((function(t){e.$toast.error(t.response.data.error.message)}))},uploadMoodboard:function(t,e){var o=this,n=new FormData;n.append("moodboard",t.target.files[0]),n.append("lang",e),this.moodboards[e].loading=!0,this.$axios.$post("/cms/collections/".concat(this.itemId,"/moodboards"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){o.load(),o.$toast.success("Moodboard added successfully"),o.moodboards[e].item=null,o.moodboards[e].loading=!1})).catch((function(t){o.$toast.error(t.response.data.error.message)}))},deleteMoodboard:function(t){var e=this;this.$axios.$delete("/cms/collections/".concat(this.itemId,"/moodboards/").concat(t)).then((function(t){e.load(),e.$toast.success("Moodboard removed successfully")})).catch((function(t){e.$toast.error(t.response.data.error.message)}))}},watch:{itemId:function(){this.item=null,this.load()}},mounted:function(){var t=this;this.$nextTick((function(){t.load()}))}}),v=(o(622),Object(r.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cmscomponent item collection"},[t.item?t._e():o("div",{staticStyle:{"text-align":"center"}},[o("b-spinner",{attrs:{type:"grow",label:"Loading..."}})],1),t._v(" "),t.item?o("div",[o("div",{staticClass:"title"},[o("span",[o("i",{staticClass:"far fa-edit"}),t._v("  ID: "+t._s(t.item.id))]),t._v(" "),o("div",[o("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:t.cancel}},[t._v("Cancel")])],1)]),t._v(" "),o("hr"),t._v(" "),o("form",{on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[o("div",{staticClass:"item-content"},[o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Creator")]),t._v(" "),o("div",{staticClass:"value"},[o("nuxt-link",{attrs:{to:"/cms/users?id="+t.item.user.id}},[t._v(t._s(t.item.user.first_name)+" "+t._s(t.item.user.last_name))])],1)]),t._v(" "),t.item.publish_at?o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Publish At")]),t._v(" "),o("div",{staticClass:"value"},[t._v(t._s(t.$moment(t.item.publish_at).format("DD/MM/YYYY")))])]):t._e(),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Active")]),t._v(" "),o("div",{staticClass:"value"},[t.item.is_active?o("b-badge",{attrs:{variant:"success"}},[t._v("Active")]):t._e(),t._v(" "),t.item.is_active?t._e():o("b-badge",{attrs:{variant:"danger"}},[t._v("Not Active")]),t._v(" "),t.item.is_active?o("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.toggleActive}},[t._v("Disable")]):t._e(),t._v(" "),t.item.is_active?t._e():o("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.toggleActive}},[t._v("Enable")])],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Title (EN)")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input",{attrs:{type:"text",name:"titleEN"},model:{value:t.item.translations[0].title,callback:function(e){t.$set(t.item.translations[0],"title",e)},expression:"item.translations[0].title"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Title (CH)")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input",{attrs:{type:"text",name:"titleCH"},model:{value:t.item.translations[1].title,callback:function(e){t.$set(t.item.translations[1],"title",e)},expression:"item.translations[1].title"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"value"},[o("div",{staticClass:"prop"},[t._v("Description (EN)")]),o("br"),t._v(" "),o("wysiwyg",{staticStyle:{background:"#fff"},model:{value:t.item.translations[0].description,callback:function(e){t.$set(t.item.translations[0],"description",e)},expression:"item.translations[0].description"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"value"},[o("div",{staticClass:"prop"},[t._v("Description (CH)")]),o("br"),t._v(" "),o("wysiwyg",{staticStyle:{background:"#fff"},model:{value:t.item.translations[1].description,callback:function(e){t.$set(t.item.translations[1],"description",e)},expression:"item.translations[1].description"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Moodboard (EN)")]),t._v(" "),o("div",{staticClass:"value"},[t.item.moodboards[0]?o("div",{staticClass:"moodboard"},[o("img",{attrs:{src:t.cloudfrontURL+"/uploads/lib/feed/moodboard"+t.item.moodboards[0].moodboard}}),t._v(" "),o("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteMoodboard(t.item.moodboards[0].id)}}},[t._v("delete")])],1):t._e(),t._v(" "),o("br"),t._v(" "),o("b-form-file",{directives:[{name:"show",rawName:"v-show",value:!t.moodboards.en.loading,expression:"!moodboards.en.loading"}],attrs:{placeholder:"Upload/Replace Moodboard"},on:{change:function(e){return t.uploadMoodboard(e,"en")}},model:{value:t.moodboards.en.item,callback:function(e){t.$set(t.moodboards.en,"item",e)},expression:"moodboards.en.item"}}),t._v(" "),o("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.moodboards.en.loading,expression:"moodboards.en.loading"}],attrs:{label:"Loading..."}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Moodboard (CH)")]),t._v(" "),o("div",{staticClass:"value"},[t.item.moodboards[1]?o("div",{staticClass:"moodboard"},[o("img",{attrs:{src:t.cloudfrontURL+"/uploads/lib/feed/moodboard"+t.item.moodboards[1].moodboard}}),t._v(" "),o("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteMoodboard(t.item.moodboards[1].id)}}},[t._v("delete")])],1):t._e(),t._v(" "),o("br"),t._v(" "),o("b-form-file",{directives:[{name:"show",rawName:"v-show",value:!t.moodboards.ch.loading,expression:"!moodboards.ch.loading"}],attrs:{placeholder:"Upload/Replace Moodboard"},on:{change:function(e){return t.uploadMoodboard(e,"ch")}},model:{value:t.moodboards.ch.item,callback:function(e){t.$set(t.moodboards.ch,"item",e)},expression:"moodboards.ch.item"}}),t._v(" "),o("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.moodboards.ch.loading,expression:"moodboards.ch.loading"}],attrs:{label:"Loading..."}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Designs")]),t._v(" "),o("div",{staticClass:"value"},[o("div",{staticClass:"designs-list"},t._l(t.item.designs,(function(e){return o("div",{key:e.id,staticClass:"design"},[o("img",{attrs:{src:t.serverURL+"/api/v1/image/thumbnail/design/"+e.code+"/tiny"}}),t._v(" "),o("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(o){return t.removeDesign(e.id)}}},[t._v("unlink")])],1)})),0)])]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Link a design")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{attrs:{placeholder:"Search by ID"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addDesign(e))}},model:{value:t.linkDesignId,callback:function(e){t.linkDesignId=e},expression:"linkDesignId"}}),t._v(" "),o("b-input-group-append",[o("b-button",{attrs:{variant:"primary",disabled:!t.linkDesignId},on:{click:t.addDesign}},[t._v("Link")])],1)],1)],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Categories")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Categories",options:t.categories,"track-by":"id",searchable:!0,"custom-label":t.categoryLabel,multiple:!0},model:{value:t.item.categories,callback:function(e){t.$set(t.item,"categories",e)},expression:"item.categories"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Apply Ons")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Apply Ons",options:t.goods,"track-by":"id",searchable:!0,"custom-label":t.goodLabel,multiple:!0},model:{value:t.item.goods,callback:function(e){t.$set(t.item,"goods",e)},expression:"item.goods"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Seasons")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Seasons",options:t.seasons,"track-by":"id",searchable:!0,"custom-label":t.seasonLabel,multiple:!1},model:{value:t.item.season,callback:function(e){t.$set(t.item,"season",e)},expression:"item.season"}})],1)])]),t._v(" "),o("div",{staticClass:"item-actions"},[o("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.loading}},[o("i",{staticClass:"far fa-edit"}),t._v("  Update")])],1)])]):t._e()])}),[],!1,null,"02836324",null).exports),f={components:{Multiselect:d.a},data:function(){return{cloudfrontURL:"https://d3b50kx4ys1jup.cloudfront.net",serverURL:"https://newapi.collectionstock.com",loading:!1,categories:[],goods:[],seasons:[],linkDesignId:"",moodboardPreview:{en:null,ch:null},request:{titleEN:"",titleCH:"",publish_at:null,descriptionEN:"",descriptionCH:"",moodboardEN:null,moodboardCH:null,designs:[],categories:[],goods:[],season:null}}},methods:{cancel:function(){this.$emit("updated",{clearItemFrame:!0})},load:function(){var t=this;this.$axios.$get("/cms/libCategories").then((function(e){t.categories=e})),this.$axios.$get("/cms/goods/masks?all=true").then((function(e){t.goods=e})),this.$axios.$get("/cms/seasons?all=true").then((function(e){t.seasons=e}))},categoryLabel:function(t){return t.translations[0].name},goodLabel:function(t){return t.translations[0].name},seasonLabel:function(t){return t.translations[0].name},addDesign:function(){var t=this;this.$axios.$get("/cms/design/".concat(this.linkDesignId)).then((function(e){"exclusive"==e.licence_type||e.buyer_id||e.owner_id?t.$toast.error("Exclusive designs can not be linked to a collection"):t.request.designs.push(e),t.linkDesignId=""})).catch((function(e){t.$toast.error(e.response.data.error.message)}))},removeDesign:function(t){this.request.designs.splice(t,1)},create:function(){var t=this,e=this.request.designs.map((function(t){return t.id})),o=this.request.categories.map((function(t){return t.id})),n=this.request.goods.map((function(t){return t.id})),r=this.request.season?this.request.season.id:null,c=new FormData;c.append("titleEN",this.request.titleEN),c.append("titleCH",this.request.titleCH),c.append("publish_at",this.request.publish_at),c.append("descriptionEN",this.request.descriptionEN),c.append("descriptionCH",this.request.descriptionCH),c.append("moodboardEN",this.request.moodboardEN),c.append("moodboardCH",this.request.moodboardCH),c.append("designs",e),c.append("categories",o),c.append("goods",n),c.append("season",r),this.loading=!0,this.$axios.$post("/cms/collections",c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.loading=!1,t.$toast.success("New collection added successfully"),t.cancel()})).catch((function(e){t.$toast.error(e.response.data.error.message)}))},generatePreview:function(t,e){var o=t.target.files[0];this.moodboardPreview[e]=URL.createObjectURL(o)}},mounted:function(){var t=this;this.$nextTick((function(){t.load()}))}},h=(o(624),{middleware:"cmsuser",layout:"cms",components:{CollectionList:c,CollectionItem:v,CreateForm:Object(r.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cmscomponent item collection"},[o("div",{staticClass:"title"},[t._m(0),t._v(" "),o("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:t.cancel}},[t._v("Cancel")])],1),t._v(" "),o("hr"),t._v(" "),o("form",{on:{submit:function(e){return e.preventDefault(),t.create(e)}}},[o("div",{staticClass:"item-content"},[o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Title (EN)")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input",{attrs:{type:"text",name:"titleEN"},model:{value:t.request.titleEN,callback:function(e){t.$set(t.request,"titleEN",e)},expression:"request.titleEN"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Title (CH)")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input",{attrs:{type:"text",name:"titleCH"},model:{value:t.request.titleCH,callback:function(e){t.$set(t.request,"titleCH",e)},expression:"request.titleCH"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Publish At")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input",{attrs:{type:"date",name:"publish_at"},model:{value:t.request.publish_at,callback:function(e){t.$set(t.request,"publish_at",e)},expression:"request.publish_at"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"value"},[o("div",{staticClass:"prop"},[t._v("Description (EN)")]),o("br"),t._v(" "),o("wysiwyg",{staticStyle:{background:"#fff"},model:{value:t.request.descriptionEN,callback:function(e){t.$set(t.request,"descriptionEN",e)},expression:"request.descriptionEN"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"value"},[o("div",{staticClass:"prop"},[t._v("Description (CH)")]),o("br"),t._v(" "),o("wysiwyg",{staticStyle:{background:"#fff"},model:{value:t.request.descriptionCH,callback:function(e){t.$set(t.request,"descriptionCH",e)},expression:"request.descriptionCH"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Moodboard (EN)")]),t._v(" "),o("div",{staticClass:"value"},[t.moodboardPreview.en?o("div",{staticClass:"design-preview"},[o("img",{attrs:{src:t.moodboardPreview.en}})]):t._e(),t._v(" "),o("b-form-file",{attrs:{placeholder:"Upload Moodboard"},on:{change:function(e){return t.generatePreview(e,"en")}},model:{value:t.request.moodboardEN,callback:function(e){t.$set(t.request,"moodboardEN",e)},expression:"request.moodboardEN"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Moodboard (CH)")]),t._v(" "),o("div",{staticClass:"value"},[t.moodboardPreview.ch?o("div",{staticClass:"design-preview"},[o("img",{attrs:{src:t.moodboardPreview.ch}})]):t._e(),t._v(" "),o("b-form-file",{attrs:{placeholder:"Upload Moodboard"},on:{change:function(e){return t.generatePreview(e,"ch")}},model:{value:t.request.moodboardCH,callback:function(e){t.$set(t.request,"moodboardCH",e)},expression:"request.moodboardCH"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Designs")]),t._v(" "),o("div",{staticClass:"value"},[o("div",{staticClass:"designs-list"},t._l(t.request.designs,(function(e,n){return o("div",{key:e.id,staticClass:"design"},[o("img",{attrs:{src:t.serverURL+"/api/v1/image/thumbnail/design/"+e.code+"/tiny"}}),t._v(" "),o("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.removeDesign(n)}}},[t._v("unlink")])],1)})),0)])]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Link a design")]),t._v(" "),o("div",{staticClass:"value"},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{attrs:{placeholder:"Search by ID"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addDesign(e))}},model:{value:t.linkDesignId,callback:function(e){t.linkDesignId=e},expression:"linkDesignId"}}),t._v(" "),o("b-input-group-append",[o("b-button",{attrs:{variant:"primary",disabled:!t.linkDesignId},on:{click:t.addDesign}},[t._v("Link")])],1)],1)],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Categories")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Categories",options:t.categories,"track-by":"id",searchable:!0,"custom-label":t.categoryLabel,multiple:!0},model:{value:t.request.categories,callback:function(e){t.$set(t.request,"categories",e)},expression:"request.categories"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Apply Ons")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Apply Ons",options:t.goods,"track-by":"id",searchable:!0,"custom-label":t.goodLabel,multiple:!0},model:{value:t.request.goods,callback:function(e){t.$set(t.request,"goods",e)},expression:"request.goods"}})],1)]),t._v(" "),o("div",{staticClass:"item-row"},[o("div",{staticClass:"prop"},[t._v("Season")]),t._v(" "),o("div",{staticClass:"value"},[o("multiselect",{attrs:{placeholder:"Seasons",options:t.seasons,"track-by":"id",searchable:!0,"custom-label":t.seasonLabel,multiple:!1},model:{value:t.request.season,callback:function(e){t.$set(t.request,"season",e)},expression:"request.season"}})],1)])]),t._v(" "),o("div",{staticClass:"item-actions"},[o("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.loading}},[o("i",{staticClass:"far fa-edit"}),t._v("  Create")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fas fa-plus"}),this._v("  ID: Add new country")])}],!1,null,"a4c4fd56",null).exports},data:function(){return{itemId:null}},methods:{openCreateForm:function(){this.$router.push("/cms/collections?id=-1")},updated:function(t){var e=t.refresh,o=t.clearItemFrame;!0===e&&this.$refs.list.refresh(),!0===o&&(this.itemId=null,this.$router.push("/cms/collections"),this.$refs.list.refresh())},onRouteUpdate:function(){this.itemId=this.$route.query.id}},watch:{$route:function(){this.onRouteUpdate()}},mounted:function(){var t=this;this.$nextTick((function(){t.onRouteUpdate()}))}}),x=Object(r.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cmspage collections"},[o("div",{staticClass:"contentframe"},[o("div",{staticClass:"menuframe"},[o("div",{staticClass:"title"},[t._m(0),t._v(" "),o("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.openCreateForm}},[o("i",{staticClass:"fas fa-plus"}),t._v("  Add new Collection")])],1),t._v(" "),o("hr"),t._v(" "),o("CollectionList",{ref:"list"})],1),t._v(" "),o("div",{staticClass:"itemframe"},[-1==t.itemId?o("CreateForm",{on:{updated:t.updated}}):t.itemId?o("CollectionItem",{attrs:{itemId:t.itemId},on:{updated:t.updated}}):t._e()],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fas fa-images"}),this._v("  Collections")])}],!1,null,"53181007",null);e.default=x.exports}}]);